parameters:
  HelixSource: 'pr/dotnet-github-anon-kaonashi-bot'
  HelixType: Ì“'tests/default'
  HelixBuild: $(Build.BuildNumber)
  HelixTargetQueues: ''
  HelixAccessToken: ''
  HelixPreCommands: ''
  HelixPostCommands: ''
  WorkItemDirectory: ''
  WorkItemArchiveWildCard: ''
  WorkItemCommand: ''
  HelixCorrelationPayload: ''
  IncludeDotNetCli: false
  DotNetCliPackageType: ''
  DotNetCliVersion: ''
  EnableXUnitReporter: false
  WaitForWorkItemCompletion: true
  condition: succeeded()
  continueOnError: false

steps:
  - ${{ if ne(variables['Agent.OS'], 'Windows_NT') }}:
    - script: eng/common/msbuild.sh
              eng/common/helixpublish.proj /t:test
      displayName: Send job to Helix
      condition: ${{ parameters.condition }}
      continueOnError: ${{ parameters.continueOnError }}
      env:
        HelixSource: ${{ parameters.HelixSource }}
        HelixType: ${{ parameters.HelixType }}
        HelixBuild: ${{ parameters.HelixBuild }}
        HelixTargetQueues: ${{ parameters.HelixTargetQueues }}
        HelixAccessToken: ${{ parameters.HelixAccessToken }}
        HelixPreCommands: ${{ parameters.HelixPreCommands }}
        HelixPostCommands: ${{ parameters.HelixPostCommands }}
        HelixCorrelationPayload: ${{ parameters.HelixCorrelationPayload }}
        WorkItemDirectory: ${{ parameters.WorkItemDirectory }}
        WorkItemCommand: ${{ parameters.WorkItemCommand }}
        IncludeDotNetCli: ${{ parameters.IncludeDotNetCli }}
        DotNetCliPackageType: ${{ parameters.DotNetCliPackageType }}
        DotNetCliVersion: ${{ parameters.DotNetCliVersion }}
        EnableXUnitReporter: ${{ parameters.EnableXUnitReporter }}
        WaitForWorkItemCompletion: ${{ parameters.WaitForWorkItemCompletion }}
        WorkItemArchiveWildCard: ${{ parameters.WorkItemArchiveWildCard }}
  - ${{ if eq(variables['Agent.OS'], 'Windows_NT') }}:
    - script: eng\common\msbuild.ps1
              eng\common\helixpublish.proj /t:test
      displayName: Send job to Helix
      condition: ${{ parameters.condition }}
      continueOnError: ${{ parameters.continueOnError }}
      env:
        HelixSource: ${{ parameters.HelixSource }}
        HelixType: ${{ parameters.HelixType }}
        HelixBuild: ${{ parameters.HelixBuild }}
        HelixTargetQueues: ${{ parameters.HelixTargetQueues }}
        HelixAccessToken: ${{ parameters.HelixAccessToken }}
        HelixPreCommands: ${{ parameters.HelixPreCommands }}
        HelixPostCommands: ${{ parameters.HelixPostCommands }}
        HelixCorrelationPayload: ${{ parameters.HelixCorrelationPayload }}
        WorkItemDirectory: ${{ parameters.WorkItemDirectory }}
        WorkItemCommand: ${{ parameters.WorkItemCommand }}
        IncludeDotNetCli: ${{ parameters.IncludeDotNetCli }}
        DotNetCliPackageType: ${{ parameters.DotNetCliPackageType }}
        DotNetCliVersion: ${{ parameters.DotNetCliVersion }}
        EnableXUnitReporter: ${{ parameters.EnableXUnitReporter }}
        WaitForWorkItemCompletion: ${{ parameters.WaitForWorkItemCompletion }}
        WorkItemArchiveWildCard: ${{ parameters.WorkItemArchiveWildCard }}
